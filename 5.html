<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css styles/vendor.css -->
    <!-- bower:css -->
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css({.tmp,app}) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
  </head>
  <body>

    <!-- Add your site or application content here -->
    <div class="app-container">
<header class="inner">
  <p class="title">Math driven CSS</p>
  <h1 id="logo"><a href="/">R/GA</a></h1>
</header>

<div id="primary">



  <h1 class="heading1">Understanding the <strong>TRANSFORM</strong> property</h1>
  <h2 class="heading2"></h2>


  <div class="module transforms">
    <div id="scene-holder">
      <div id="scene" class="threed"></div>
      <div id="square">
        <div id="ax-x"></div>
        <div id="ax-y"></div>
      </div>
    </div>
    <div class="transform-controllers">
      <div class="controller">
        <p class="controller-title">Translate</p>
        <p class="output"><span id="output-translate"></span></p>
        <ul class="controller-options">
          <li>X: <input id="translatex" type="range" min="-300" max="300" step="0.01" value="0"></li>
          <li>Y: <input id="translatey" type="range" min="-300" max="300" step="0.01" value="0"></li>
          <li>Z: <input id="translatez" type="range" min="-300" max="300" step="0.01" value="0"></li>
        </ul>
      </div>
      <div class="controller">
        <p class="controller-title">Rotate</p>
        <p class="output"><span id="output-rotate"></span></p>
        <ul class="controller-options">
          <li>X: <input id="rotationx" type="range" min="-180" max="180" step="0.01" value="0"></li>
          <li>Y: <input id="rotationy" type="range" min="-180" max="180" step="0.01" value="0"></li>
          <li>Z: <input id="rotationz" type="range" min="-180" max="180" step="0.01" value="0"></li>
        </ul>
      </div>
      <div class="controller">
        <p class="controller-title">Skew</p>
        <p class="output"><span id="output-skew"></span></p>
        <ul class="controller-options">
          <li>X: <input id="skewx" type="range" min="-180" max="180" step="0.01" value="0"></li>
          <li>Y: <input id="skewy" type="range" min="-180" max="180" step="0.01" value="0"></li>
        </ul>
      </div>
      <div class="controller">
        <p class="controller-title">Origin</p>
        <p class="output"><span id="output-origin"></span></p>
        <ul class="controller-options">
          <li>X: <input id="originx" type="range" min="0" max="100" step="0.01" value="50"></li>
          <li>Y: <input id="originy" type="range" min="0" max="100" step="0.01" value="50"></li>
        </ul>
      </div>
      <div class="controller">
        <p class="controller-title">Perspective</p>
        <p class="output"><span id="output-perspective"></span></p>
        <ul class="controller-options">
          <li><input id="perspective" type="range" min="300" max="2000" step="1" value="1600"></li>
        </ul>
      </div>
    </div>
  </div>



  <script>
    function initTransformControllers() {
      var holder = document.getElementById('scene-holder'),
          square = document.getElementById('square'),
          tX = document.getElementById('translatex'),
          tY = document.getElementById('translatey'),
          tZ = document.getElementById('translatez'),
          oT = document.getElementById('output-translate'),
          rX = document.getElementById('rotationx'),
          rY = document.getElementById('rotationy'),
          rZ = document.getElementById('rotationz'),
          oR = document.getElementById('output-rotate'),
          sX = document.getElementById('skewx'),
          sY = document.getElementById('skewy'),
          oS = document.getElementById('output-skew'),
          oX = document.getElementById('originx'),
          oY = document.getElementById('originy'),
          oO = document.getElementById('output-origin'),
          axX = document.getElementById('ax-x'),
          axY = document.getElementById('ax-y'),
          perspect = document.getElementById('perspective'),
          oP = document.getElementById('output-perspective');

      function transform() {

        holder.style.webkitPerspective = perspect.value + 'px';

        var trans = 'translateX(' + tX.value + 'px) translateY(' + tY.value + 'px) translateZ(' + tZ.value + 'px)';
        var skew = 'skew('+ sX.value +'deg,'+ sY.value +'deg)';
        var rot = 'rotateX(' + rX.value + 'deg) rotateY(' + rY.value + 'deg) rotateZ(' + rZ.value + 'deg)';

        var origin = oX.value + '% ' + oY.value + '%';

        square.style.webkitTransformOrigin = origin;

        axX.style.top = oY.value + '%';
        axY.style.left = oX.value + '%';
        // console.log(oO);

        updateOutPut(trans, rot, skew);


        // console.log(trans);

        trans = [trans,rot].join('\n');
        trans = [trans,skew].join('\n');

        // console.log('-----');
        // console.log(trans);


        square.style.webkitTransform = trans;

        webkitRequestAnimationFrame(transform);
      }

      function updateOutPut(trans, rot, skew) {
        // var betweenBrackets = /\(([^)]+)\)/;
        // var matches = betweenBrackets.exec('(xxx) I expect five hundred dollars ($500).');

        // console.log(matches[0]);

        oO.innerHTML = oY.value + '% ' + oX.value + '%';
        oT.innerHTML = trans;
        oR.innerHTML = rot;
        oS.innerHTML = skew;
        oP.innerHTML = perspect.value;
      }

      transform();
    }

    initTransformControllers();
  </script>





  <ul class="app-nav">
    <li><a href="1.html">chapter 1</a></li>
    <li><a href="2.html">chapter 2</a></li>
    <li><a href="3.html">chapter 3</a></li>
    <li><a href="4.html">chapter 4</a></li>
    <li><a href="5.html" class="selected">chapter 5</a></li>
    <li><a href="6.html">chapter 6</a></li>
    <li><a href="7.html">chapter 7</a></li>
    <li><a href="8.html">chapter 8</a></li>
  </ul>
</div>


<p class="next-page"><a href="6.html">next</a></p>

    </div>

    <footer>
      <p class="copy">&copy; Mihnea Belcin 2014</p>
    </footer>
</body>
</html>
