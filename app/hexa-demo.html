<!doctype html>
<html class="no-js" lang="">
  <head>
    <meta charset="utf-8">
    <title>Playground</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <!-- build:css(.) styles/vendor.css -->
    <!-- bower:css -->
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
  </head>
  <body>

    <div id="container">

      <div class="hexas-holder">
        <img src="images/logo.png" alt="akqa" class="hexa-logo" />
        <input type="checkbox" value="" id="anim-trigger">
        <label class="anim-trigger" for="anim-trigger">Magic</label>
        <div id="hexa-grid">
          <div class="grid-group">

            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/HgYhhKGnn7E?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>

            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/NvKmRxZw1Mk?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>


            <div class="hexagon">
              <div class="inner">
                
              </div>
            </div>

            <div class="hexagon">
              <div class="inner">
              </div>
            </div>

            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/AUjG74PLQz4?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>

            <div class="hexagon">
              <div class="inner">
                
              </div>
            </div>
          </div>

          <div class="grid-group">
            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner">
                
              </div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>
          </div>

          <div class="grid-group">
            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/riZULmtxkvU?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>

            <div class="hexagon">
              <div class="inner">
                
              </div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/XAiy_xVTXPM?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>
          </div>

          <div class="grid-group">
            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/jUkuZ_QxBMQ?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner">
                
              </div>
            </div>
            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/K5e1yMX3rSE?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>
          </div>

          <div class="grid-group">
            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/_B_fvXY5Cks?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>

            <div class="hexagon">
              <div class="inner">
                
              </div>
            </div>

            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/K_p4zuhDewA?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>
          </div>

          <div class="grid-group">
            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>
            <div class="hexagon">
              <div class="inner">
              
              </div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>
          </div>

          <div class="grid-group">
            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/L5Hbp3M5AV0?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>
            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/bI1Aa-Ld9cI?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/gefICw_d3W8?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>

            <div class="hexagon">
              <div class="inner">
                
              </div>
            </div>
          </div>

          <div class="grid-group">
            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>
            <div class="hexagon">
              <div class="inner">
              
              </div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/hY4EorJphrk?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>
          </div>

          <div class="grid-group">
            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>
            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner">
                <iframe width="311" height="175" src="https://www.youtube.com/embed/fLQv1jtPr-8?rel=0&amp;controls=0&amp;showinfo=0&amp;autoplay=1&amp;loop=1" frameborder="0" allowfullscreen></iframe>
              </div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner">
                
              </div>
            </div>
          </div>

          <div class="grid-group">
            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>
            <div class="hexagon">
              <div class="inner">
              
              </div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>
          </div>

          <div class="grid-group">
            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>
            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner"></div>
            </div>

            <div class="hexagon">
              <div class="inner">
                
              </div>
            </div>
          </div>


        </div>
      </div>




      <div class="leap-holder" id="leap">
        <div class="leap">

          <div class="spin-x">
            <div class="rotatable-holder">
              <div id="lcube" class="lcube rotatable-lcube">
                  <div class="lcube-half"></div>
              </div>
            </div>
          </div>

          <div id="finger" class="lcube finger">
              <div class="lcube-half finger-half"></div>
          </div>

          <div id="palm" class="lcube palm">
              <div class="lcube-half palm-half"></div>
          </div>

        </div>
      </div>

      <!-- <div class=""></div> -->
    </div>


    <!-- build:js(.) scripts/vendor.js -->
    <!-- bower:js -->
    <script src="/bower_components/jquery/dist/jquery.js"></script>
    <script src="/bower_components/modernizr/modernizr.js"></script>
    <!-- endbower -->
    <!-- endbuild -->


    <!-- build:js(.) scripts/plugins.js -->
    <!-- endbuild -->


    <!-- build:js scripts/main.js -->
    <script src="scripts/main.js"></script>
    <!-- endbuild -->

    <script src="scripts/leap-0.5.0.min.js"></script>
    
    <script>
    
      function initLeap() {
        function moveFinger(Finger, posX, posY, posZ, dirX, dirY, dirZ) {
          Finger.style.webkitTransform =
          Finger.style.mozTransform =
          Finger.style.transform = 'translateX('+posX+'px)'+
                                  'translateY('+posY+'px)'+
                                  'translateZ('+posZ+'px)'+
                                  'rotateX('+dirX+'deg)'+
                                  'rotateY('+dirY+'deg)'+
                                  'rotateZ('+dirZ+'deg)'+
                                  'rotate(10deg) ';
          Finger.style.display = 'block';
        }

        function movePalm(Palm, posX, posY, posZ, rotX, rotY, rotZ) {
          Palm.style.webkitTransform =
          Palm.style.mozTransform =
          Palm.style.transform = 'rotate(10deg)'+
                                  'translateX('+posX+'px)'+
                                  'translateY('+posY+'px)'+
                                  'translateZ('+posZ+'px)'+
                                  'rotateX('+rotX+'deg)'+
                                  'rotateY('+rotY+'deg)'+
                                  'rotateZ('+rotZ+'deg)'+
                                  'rotateY(90deg) rotate(45deg) translateX(50px)';
          // Palm.style.display = 'block';
        }

        var stepLeft = false;
        var stepRight = false;
        var stepZeroCount = 0;

        // $scope.spinActive = false;
        function triggerAnim() {

          if (animStepNr < 2){
            animStepNr++;
          } else {
          }
          // console.log('animStepNr ----> ', animStepNr);

          if (animStepNr === 1 && stepZeroCount >= 4) {
            $('.rotatable-holder').addClass('step2');
          }

          if (animStepNr === 2 && stepZeroCount >= 4) {
            if ($('.rotatable-holder').hasClass('step2')) {
              $('.spin-x').addClass('active');  
            } else {
              animStepNr = 1;
            }
          }
        }

        var fingers = {},
            palms = {};

        var gestureStarted = false,
            gestureEnded = false,
            animStepNr = 0;

        Leap.loop(function(frame) {
          var fingerIds = {},
              handIds = {},
              handsLength;

          if (frame.hands === undefined ) {
            handsLength = 0;
          } else {
            handsLength = frame.hands.length;
          }

          for (var handId = 0, handCount = handsLength; handId !== handCount; handId++) {
            var hand = frame.hands[handId],
                posX = (hand.palmPosition[0]*3),
                posY = (hand.palmPosition[2]*3)-200,
                posZ = (hand.palmPosition[1]*3)-400,
                rotX = (hand._rotation[2]*90),
                rotY = (hand._rotation[1]*90),
                rotZ = (hand._rotation[0]*90),
                palm = palms[hand.id];

            if (posZ < 150) {
              gestureStarted = true;
            }

            if (posX < -100) {
              stepLeft = true;
            }

            if (posX > 100) {
              stepRight = true;
            }

            if (stepLeft && stepRight) {
              stepZeroCount++;
              stepRight = false;
              stepLeft = false;
            }

            if (stepZeroCount === 4) {
              $('.leap-holder').addClass('anim-step0');
            }

            if ( gestureStarted && posZ > 300) {
              gestureEnded = true;
              gestureStarted = false;

              triggerAnim();
            }

            var palmDiv;

            if (!palm) {
              palmDiv = document.getElementById('palm').cloneNode(true);
              palmDiv.setAttribute('id',hand.id);
              // palmDiv.style.backgroundColor='#'+Math.floor(Math.random()*16777215).toString(16);
              document.getElementById('leap').appendChild(palmDiv);
              palms[hand.id] = hand.id;

            } else {
              palmDiv =  document.getElementById(hand.id);

              if (typeof(palmDiv) !== 'undefined' && palmDiv !== null) {
                movePalm(palmDiv, posX, posY, posZ, rotX, rotY, rotZ);
              }
            }

            handIds[hand.id] = true;
          }

          for (handId in palms) {
            if (!handIds[handId]) {
              var palmsDiv =  document.getElementById(palms[handId]);

              palmsDiv.parentNode.removeChild(palmsDiv);

              delete palms[handId];
            }
          }

          for (var pointableId = 0, pointableCount = frame.pointables.length; pointableId !== pointableCount; pointableId++) {
            var pointable = frame.pointables[pointableId],
                pointablePosX = (pointable.tipPosition[0]*3),
                pointablePosY = (pointable.tipPosition[2]*3)-200,
                pointablePosZ = (pointable.tipPosition[1]*3)-400,
                pointableDirX = -(pointable.direction[1]*90),
                pointableDirY = -(pointable.direction[2]*90),
                pointableDirZ = (pointable.direction[0]*90),
                finger = fingers[pointable.id];

            var fingerDiv;
            if (!finger) {
              fingerDiv = document.getElementById('finger').cloneNode(true);
              fingerDiv.setAttribute('id',pointable.id);

              // fingerDiv.style.backgroundColor='#'+Math.floor(Math.random()*16777215).toString(16);

              document.getElementById('leap').appendChild(fingerDiv);
              fingers[pointable.id] = pointable.id;
            } else {
              fingerDiv =  document.getElementById(pointable.id);

              if (typeof(fingerDiv) !== 'undefined' && fingerDiv !== null) {
                moveFinger(fingerDiv, pointablePosX, pointablePosY, pointablePosZ, pointableDirX, pointableDirY, pointableDirZ);
              }
            }

            fingerIds[pointable.id] = true;
          }

          for (var fingerId in fingers) {
            if (!fingerIds[fingerId]) {
              var fingersDiv =  document.getElementById(fingers[fingerId]);
              fingersDiv.parentNode.removeChild(fingersDiv);
              delete fingers[fingerId];
            }
          }

        });

      }

      initLeap();

    </script>

    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
      (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
      function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
      e=o.createElement(i);r=o.getElementsByTagName(i)[0];
      e.src='https://www.google-analytics.com/analytics.js';
      r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
      ga('create','UA-XXXXX-X');ga('send','pageview');
    </script>
  </body>
</html>
